<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>File Manager</title>

<style type="text/css">
	#loading-wrap {
		position:fixed;
		height:100%;
		width:100%;
		overflow:hidden;
		top:0;
		left:0;
		display:block;
		background: white url(./images/wait30trans.gif) no-repeat center center;
		z-index:999;
	}
</style>

<!-- CSS dynamically added using 'config.options.theme' defined in config file -->
</head>
<body>
<div id="loading-wrap" data-bind="visible: loading"><!-- loading wrapper / removed when loaded --></div>
<div>
    <div id="uploader" method="post">
        <div class="pull-left">
            <h6 data-bind="text: 'Current Folder: ' + currentPath()"></h6>
            </div>
            <!--<div id="uploadresponse"></div>-->
        <div class="pull-right">
            <button type="button" class="btn btn-default" data-bind="click: goLevelUp, visible: currentPath() !== config.options.fileRoot || currentView() === 'details'"><span class="glyphicon glyphicon-level-up"></span></button>
            <button type="button" class="btn btn-default" data-bind="click: goHome, visible: notHome"><span class="glyphicon glyphicon-home"></span></button>
            <!--<input id="mode" name="mode" type="hidden" value="add"/>-->
            <!--<input id="currentpath" name="currentpath" type="hidden"/>-->
            <!--<div id="file-input-container">-->
                <!--<div id="alt-fileinput">-->
                    <!--<input id="filepath" name="filepath" type="text"/><button id="browse" name="browse" type="button" value="Browse"></button>-->
                <!--</div>-->
                <!--<input id="newfile" name="newfile" type="file"/>-->
            <!--</div>-->
            <button type="button" class="btn btn-default" data-bind="click: function (){currentView('uploads');}, visible: function () {hasCapability('upload')}"><span class="glyphicon glyphicon-upload"> Upload</span></button>
            <button type="button" class="btn btn-default" data-bind="click: createFolder"><span class="glyphicon glyphicon-folder-open"></span> New Folder</button>
            <button type="button" data-bind="title: language.list_view, click: switchViews" class="btn btn-default"><span data-bind="css: viewButtonClass"></span></button>
        </div>

        <div class="clearfix"></div>
    </div>

    <div id="splitter">
        <div id="tree">
        </div>
        <div id="fileinfo">

                    <div data-bind="template: {name: templateName, afterRender: afterRender}">
                    </div>

                </div>
    </div>

<div id="footer">
<!--<form name="search" id="search" method="get">-->
		<!--<div>-->
			<!--<input type="text" value="" name="q" id="q" />-->
			<!--<a id="reset" href="#" class="q-reset"></a>-->
			<!--<span class="q-inactive"></span>-->
		<!--</div> -->
<!--</form>-->
    <div class="pull-left">
        <p data-bind="text: 'Version: ' + config.version"></p>
    </div>
    <div class="pull-right">
        <a data-bind="attr: {href: config.url}" id="link-to-project"></a>
        <div id="folder-info">
            <span id="items-counter">{{folderCount}}</span> {{language.items}} - {{language.size}} : <span id="items-size">{{folderSize}}</span>
        </div>
    </div>
    <div class="clearfix"></div>

</div>



    <script type="text/html" id="uploads-template">
    <p> Let us upload some filuz :)</p>
        <form action="/file-upload"
          class="dropzone"
          id="my-awesome-dropzone"></form>
    </script>

    <script type="text/html" id="grid-template">
        <div class="container-fluid">
            <div class="row">
                <div id="contents" class="" data-bind="foreach: {data: currentFolder, as: 'item'}">
                    <div class="col-xs-12 col-sm-4 col-md-3 col-lg-2 col-fix grid-border text-center" data-bind="click: $root.browseToItem, contextMenu: menu">
                        <img width="64" data-bind="attr: {src: getIconUrl, alt: getIconUrl, dataPath: getIconUrl}"/>

                        <p class="text-center" data-bind="text: item.filename"></p>
                    </div>
                </div>

            </div>
        </div>
    </script>

    <script type="text/html" id="list-template">
        <table class="table">
            <thead>
            <tr>
                <th>{{$root.language.name}}</th>
                <th>{{$root.language.dimensions}}</th>
                <th>{{$root.language.size}}</th>
                <th>{{$root.language.modified}}</th>
            </tr>
            </thead>
            <tbody data-bind="foreach: {data: currentFolder, as: 'item'}">
            <tr class="cap_select cap_download cap_rename cap_delete cap_replace" data-bind="click: $root.browseToItem, contextMenu: menu">
                <td><span data-bind="css: item.isDirectory() ? 'glyphicon glyphicon-folder-close' : 'glyphicon glyphicon-file'">  {{item.filename}}</span> </td>
                <td>{{item.properties().height}}x{{item.properties().width}}</td>
                <td>{{item.properties().size}}</td>
                <td>{{item.properties().dateModified}}</td>
            </tr>
            </tbody>
        </table>
    </script>

    <script type="text/html" id="details-template">
        <div class="text-center" data-bind="with: currentItem">
            <div data-bind="template: {name: templateName}"></div>
            <div>
                <button class="btn" data-bind="click: selectMe, visible: $root.hasCapability('select')">Select</button>
                <button class="btn" data-bind="click: download, visible: $root.hasCapability('download')">Download</button>
                <button class="btn" data-bind="click: rename, visible: $root.hasCapability('rename')">Rename</button>
                <button class="btn" data-bind="click: move, visible: $root.hasCapability('move')">Move</button>
                <button class="btn" data-bind="click: removeMe, visible: $root.hasCapability('move')">Delete</button>
                <button class="btn" data-bind="click: replaceMe, visible: $root.hasCapability('replace')" id="replaceMe">Replace</button>
                <form id="my-replace-dropzone" style="display: none;" class="dropzone"></form>
                <h1 class="h1">{{filename}}</h1>
                <!--<div id="tools"></div>-->
            </div>
            <dl>
                <dt>Dimensions</dt>
                <dd>{{properties().height}}x{{properties().width}}</dd>
                <dt>Created</dt>
                <dd>{{properties().dateCreated}}</dd>
                <dt>Modified</dt>
                <dd>{{properties().dateModified}}</dd>
                <dt>Size</dt>
                <dd>{{properties().size}}</dd>
            </dl>
        </div>
    </script>

    <script type="text/html" id="image-template">
        <img id="detailImage" data-bind="attr: {src: getDownloadUrl, alt: getDownloadUrl}, visible: isImageFile" class="img-thumbnail center-block">
    </script>

    <script type="text/html" id="video-player-template">
        <video data-bind="attr: {width: config.videos.videosPlayerWidth, height: config.videos.videosPlayerHeight, src: getDownloadUrl}" controls='controls'>
            <img data-bind="attr: {src: getPreviewUrl}" />
        </video>
    </script>

    <script type="text/html" id="audio-player-template">
        <audio data-bind="attr: {src: getDownloadUrl}" controls='controls'>
            <img data-bind="attr: {src: getPreviewUrl}" />
        </audio>
    </script>

    <script type="text/html" id="pdf-viewer-template">
        <iframe id='fm-pdf-viewer' data-bind="attr: {src: 'scripts/ViewerJS/index.html#' + getDownloadUrl(), width: config.pdfs.pdfsReaderWidth,
            height: config.pdfs.pdfsReaderHeight}"
            allowfullscreen webkitallowfullscreen></iframe>
    </script>

    <!--<script type="text/javascript" src="scripts/jquery-1.11.3.min.js"></script>-->
<!--<script type="text/javascript" src="scripts/jquery-browser.js"></script>-->
<!--<script type="text/javascript" src="scripts/jquery.form-3.24.js"></script>-->
<!--<script type="text/javascript" src="scripts/jquery.splitter/jquery.splitter-1.5.1.js"></script>-->
<!--<script type="text/javascript" src="scripts/jquery.filetree/jqueryFileTree.js"></script>-->
<!--<script type="text/javascript" src="scripts/jquery.contextmenu/jquery.contextMenu-1.01.js"></script>-->
<!--<script type="text/javascript" src="scripts/jquery.impromptu-3.2.min.js"></script>-->
<!--<script type="text/javascript" src="scripts/jquery.tablesorter-2.7.2.min.js"></script>-->
<script type="text/javascript" data-main="scripts/filemanager.js" src="node_modules/requirejs/require.js"></script>
</div>
</body>
</html>